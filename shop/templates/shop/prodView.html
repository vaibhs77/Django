{% extends 'shop/basic.html' %}
{% block title %} Product Detail of {{product.product_name}}
{%endblock%}


{%load static%}
{% block body%}

<div class = "container my-3">
    <div class="row">
        <div class="col-md-4">

        <img src='/media/{{product.image}}' width ="150px"; height="233px"; alt="...">
            <div class="row  my-2 ">
                <div><span id="divpr{{product.id}}" class="divpr">
                                    <button id="pr{{product.id}}" class="btn btn-primary cart">Add To Cart</button>
                                </span></div>


           <a class="btn btn-primary mx-2" href="#" role="button">BUY now Â»</a>
</div>
      </div>
    <div class="col-md-8">
        <h2>{{product.product_name}}</h2>

        <h5> <b>RS:{{product.price}}</b></h5>
        <p>{{product.desc}}</p>

      </div>

        </div>
</div>
{%endblock%}

{% block js%}
<script>
if (localStorage.getItem('cart') == null) {
    var cart = {};
} else {
    cart = JSON.parse(localStorage.getItem('cart'));
    document.getElementById('cart').innerHTML = Object.keys(cart).length;

    updateCart(cart)
}
function updateCart(cart) {
     var sum = 0;
    for (var item in cart) {

        document.getElementById('divpr' + item).innerHTML = "<button id='minus" + item + "' class='btn btn-primary minus'>-</button> <span id='val" + item + "''>" + cart[item] + "</span> <button id='plus" + item + "' class='btn btn-primary plus'> + </button>";
        sum = cart[item] + sum;
    }
    localStorage.setItem('cart', JSON.stringify(cart));
    document.getElementById('cart').innerHTML = sum;
    console.log(cart);
    updatepopcart(cart)
}
</script>
{% endblock %}